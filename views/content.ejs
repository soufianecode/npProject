<!doctype html>
<html lang="en">

<%- include('partials/header'); -%>

<body>

    <div class="container-fluid">
        <div class="jumbotron">
            <img class="logo" src="/Logo-mangactu.png" alt="Logo Mang'actu">
            <div class="topnav">
                <input class="search-bar" type="text" placeholder="Search..">
            </div>

            <nav class="navbar navbar-expand-lg">

                <button class="navbar-button navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="/signup">Signup <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/logout">Log out</a>
                        </li>

                    </ul>

                </div>
            </nav>

        </div>
        <div id="random-article" class="columns">

        </div>




    </div>

    <script>
        

        const API_URL = 'http://newsapi.org/v2/top-headlines?' + 'country=us&' +
            'apiKey=f8f896aac2864bf4ade29eae8b6f6e02';
        const randomArticleElement = document.querySelector('#random-article');

        async function getNews() {
            const response = await fetch(API_URL);
            const json = await response.json();

            var i = -1;
            json.articles.forEach(element => {
                
                i++;
                console.log(i);

                console.log(json.articles[i]);

                // const columnElement = document.createElement('div');
                // columnElement.classList.add('column');

                // const cardElement = document.createElement('div');
                // cardElement.classList.add('card');
                // columnElement.appendChild(cardElement);

                // const cardImageElement = document.createElement('div');
                // cardImageElement.classList.add('card-Image');
                // cardElement.appendChild(cardImageElement);

                // const figureElement = document.createElement('div');
                // figureElement.classList.add('image');
                // cardImageElement.appendChild(figureElement);

                // const imageElement = document.createElement('img');
                // imageElement.src = json.articles[i].urlToImage;
                // figureElement.appendChild(imageElement)

                // randomArticleElement.appendChild(columnElement);

                const cardElement = document.createElement('div');
                cardElement.classList.add('cardContent');

                const imageElement = document.createElement('img');
                imageElement.classList.add('imgElement')
                imageElement.src = json.articles[i].urlToImage;
                cardElement.appendChild(imageElement);

                const containerElement = document.createElement('div');
                containerElement.classList.add('containerGenerate');
                cardElement.appendChild(containerElement);

                const titleElement = document.createElement('h3');
                titleElement.classList.add('titleElement');
                titleElement.textContent = json.articles[i].title;
                containerElement.appendChild(titleElement);
                console.log(titleElement);

                const paraElement = document.createElement('p');
                paraElement.classList.add('para');
                paraElement.textContent = json.articles[i].content;
                containerElement.appendChild(paraElement);
                console.log(paraElement);



                randomArticleElement.appendChild(cardElement);

            });
        };

        getNews();
    </script>



    <!-- Optional JavaScript -->
    <script src="/Frontend/script.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
    </script>
</body>

</html>



